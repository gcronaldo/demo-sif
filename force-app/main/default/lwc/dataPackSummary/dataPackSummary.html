<template>
    <div class="c-container">
        <lightning-card title="Data Pack Summary" icon-name="doctype:pack">
            <lightning-layout multiple-rows="true" class="slds-m-left_small">
                <lightning-layout-item size="12" class="lgc-bg">
                    <div class="slds-p-top_x-small slds-p-left_small">
                        <div class="slds-text-body_small">Package Name</div>
                        <div class="slds-text-heading_small">{objects.packData.packName}</div>
                    </div>
                    <div class="slds-p-top_x-small slds-p-left_small">
                        <div class="slds-text-body_small">Frequency</div>
                        <div class="slds-text-heading_small">{objects.packData.frequency}</div>
                    </div>
                    <div class="slds-p-top_x-small slds-p-left_small slds-p-bottom_small">
                        <div class="slds-text-body_small">Schedule</div>
                        <div class="slds-text-heading_small">
                            <lightning-formatted-time value={objects.packData.schedule}>
                            </lightning-formatted-time>
                        </div>
                    </div>
                </lightning-layout-item>
                <lightning-layout-item size="12">
                    <lightning-layout vertical-align="center">
                        <template if:true={objects.objects}>
                            <ul>
                                <template for:each={objects.objects} for:item="obj">
                                    <li key={obj.objectName} >
                                        <lightning-accordion active-section-name={obj.objectName}
                                                                allow-multiple-sections-open
                                                                onsectiontoggle={handleToggleSection}>
                                        <lightning-accordion-section name={obj.objectName} label={obj.objectName}>
                                            <p>Object: {obj.objectName}</p>
                                            <p>Execution Order: {obj.executionOrder}</p>
                                            <template lwc:if={obj.replicationSelected}>
                                                <lightning-card title="Replication Info">
                                                    <p>Query Conditional: {obj.queryConditional}</p>
                                                    <p>Bucket Name: {obj.bucketName}</p>
                                                    <p>Screen Size Load: {obj.screenSizeLoad}</p>
                                                    <p>Path: {obj.path}</p>
                                                </lightning-card>
                                            </template>
                                            <template lwc:if={obj.purgeSelected}>
                                                <lightning-card title="Purge Info">
                                                    <p>batchSize: {obj.batchSize}</p>
                                                    <p>Query Conditional: {obj.queryConditionalPurge}</p>
                                                </lightning-card>
                                            </template>
                                        </lightning-accordion-section>
                                    </lightning-accordion>
                                    </li>
                                </template>
                            </ul>
                        </template>
                    </lightning-layout>
                </lightning-layout-item>
            </lightning-layout>
            <div class="slds-align_absolute-center slds-border_top">
                <lightning-button-group>
                    <lightning-button
                        label="Save"
                        onclick={saveDataPack}
                        class="slds-m-top_x-small"
                        variant="brand">
                    </lightning-button>
                </lightning-button-group>
            </div>
        </lightning-card>
    </div>
</template>