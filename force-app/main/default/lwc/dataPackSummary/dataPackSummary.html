<template>
    <div class="c-container">
        <template lwc:if={showSpinner}>
            <lightning-spinner alternative-text="Loading" size="large" class="slds-align_absolute-center slds-border_top spinnerHolder"></lightning-spinner>
        </template>
        <lightning-card title="Data Pack Summary" icon-name="doctype:pack">
            <lightning-layout multiple-rows="true" class="slds-m-left_small">
                <lightning-layout-item size="12" class="lgc-bg">
                    <lightning-layout>
                        <lightning-layout-item padding="around-small">
                            <div class="header-column">
                                <p class="field-title" title="Package Name">Package Name</p>
                                <p>{objects.packData.packName}</p>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small">
                            <div class="header-column">
                                <p class="field-title" title="Frequency">Frequency</p>
                                <p>{objects.packData.frequency}</p>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small">
                            <div class="header-column">
                                <p class="field-title" title="Schedule">Schedule</p>
                                <p>{objects.packData.schedule}</p>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
                <lightning-layout-item size="12">
                    <lightning-layout vertical-align="center">
                        <template if:true={objects.objects}>
                            <ul>
                                <template for:each={objects.objects} for:item="obj">
                                    <li key={obj.objectName} >
                                        <lightning-accordion active-section-name=""
                                                                allow-multiple-sections-open
                                                                onsectiontoggle={handleToggleSection}>
                                        <lightning-accordion-section name={obj.objectName} label={obj.objectName}>
                                            <lightning-layout class="slds-border_top">
                                                <div class="slds-text-title">Object Setup</div>
                                                <lightning-layout-item padding="around-small">
                                                    <div class="header-column">
                                                        <p class="field-title" title="Field 1">Object</p>
                                                        <p>{obj.objectName}</p>
                                                    </div>
                                                </lightning-layout-item>
                                                <lightning-layout-item padding="around-small">
                                                    <div class="header-column">
                                                        <p class="field-title" title="Field 1">Execution Order</p>
                                                        <p>{obj.executionOrder}</p>
                                                    </div>
                                                </lightning-layout-item>
                                            </lightning-layout>
                                            <template lwc:if={obj.replicationSelected}>
                                                <lightning-layout class="slds-border_top">
                                                    <div class="slds-text-title">Replication Setup</div>
                                                    <lightning-layout-item padding="around-small">
                                                        <div class="header-column">
                                                            <p class="field-title" title="Query Conditional">Query Conditional</p>
                                                            <p>{obj.queryConditional}</p>
                                                        </div>
                                                    </lightning-layout-item>
                                                    <lightning-layout-item padding="around-small">
                                                        <div class="header-column">
                                                            <p class="field-title" title="Bucket Name">Bucket Name</p>
                                                            <p>{obj.bucketName}</p>
                                                        </div>
                                                    </lightning-layout-item>
                                                    <lightning-layout-item padding="around-small">
                                                        <div class="header-column">
                                                            <p class="field-title" title="Screen Size Load">Screen Size Load</p>
                                                            <p>{obj.screenSizeLoad}</p>
                                                        </div>
                                                    </lightning-layout-item>
                                                    <lightning-layout-item padding="around-small">
                                                        <div class="header-column">
                                                            <p class="field-title" title="Path">Path</p>
                                                            <p>{obj.path}</p>
                                                        </div>
                                                    </lightning-layout-item>
                                                </lightning-layout>
                                            </template>
                                            <template lwc:if={obj.purgeSelected}>
                                                <lightning-layout class="slds-border_top">
                                                    <div class="slds-text-title">Purge Setup</div>
                                                    <lightning-layout-item padding="around-small">
                                                        <div class="header-column">
                                                            <p class="field-title" title="Batch Size">Batch Size</p>
                                                            <p>{obj.batchSize}</p>
                                                        </div>
                                                    </lightning-layout-item>
                                                    <lightning-layout-item padding="around-small">
                                                        <div class="header-column">
                                                            <p class="field-title" title="Query Conditional">Query Conditional</p>
                                                            <p>{obj.queryConditionalPurge}</p>
                                                        </div>
                                                    </lightning-layout-item>
                                                </lightning-layout>
                                            </template>
                                        </lightning-accordion-section>
                                    </lightning-accordion>
                                    </li>
                                </template>
                            </ul>
                        </template>
                    </lightning-layout>
                </lightning-layout-item>
            </lightning-layout>
            <div class="slds-align_absolute-center slds-border_top">
                <lightning-button-group>
                    <lightning-button
                        label="Save"
                        onclick={saveDataPack}
                        class="slds-m-top_x-small"
                        variant="brand">
                    </lightning-button>
                </lightning-button-group>
            </div>
        </lightning-card>
    </div>
</template>